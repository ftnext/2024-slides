<!DOCTYPE html>

<html lang="ja" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>PEP 723ï¼ˆInline script metadataï¼‰ãŒæ‹“ãä¸–ç•Œã€‚Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å¿…è¦ãªä»®æƒ³ç’°å¢ƒã‚’ãƒ„ãƒ¼ãƒ«ã«ãŠã¾ã‹ã›ã§ãã‚‹ã‚“ã§ã™ï¼</title>
    <link rel="stylesheet" type="text/css" href="../_static/revealjs4/dist/reveal.css?v=ba26b9ed" />
    <link rel="stylesheet" href="../_static/revealjs4/dist/theme/black.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/revealjs4/plugin/highlight/zenburn.css?v=83d5745d" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/common.css?v=c1f4a920" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <script src="../_static/design-tabs.js?v=36754332"></script>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ftnext">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://ftnext.github.io/2024-slides/stapy-sep/preview-pyconjp-pep723-talk.html">
    <meta property="og:title" content="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‰ˆï¼šPEP 723ï¼ˆInline script metadataï¼‰ãŒæ‹“ãä¸–ç•Œ">
    <meta property="og:description" content="Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å¿…è¦ãªä»®æƒ³ç’°å¢ƒã‚’ãƒ„ãƒ¼ãƒ«ã«ãŠã¾ã‹ã›ã§ãã‚‹ã‚“ã§ã™ï¼ ã¿ã‚“ãªã®Pythonå‹‰å¼·ä¼š#108 LT">
    <meta property="og:image" content="https://ftnext.github.io/2024-slides/_static/ogps/stapy-sep.png">

  </head><body>
    <div class="reveal">
        <div class="slides" role="main">
            <section>
<h1 style="word-break: keep-all; overflow-wrap: break-word;">PEP 723ï¼ˆInline script metadataï¼‰ãŒæ‹“ãä¸–ç•Œã€‚Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å¿…è¦ãªä»®æƒ³ç’°å¢ƒã‚’ãƒ„ãƒ¼ãƒ«ã«ãŠã¾ã‹ã›ã§ãã‚‹ã‚“ã§ã™ï¼</h1>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;"><strong>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‰ˆ</strong>ï¼šPEP 723ï¼ˆInline script metadataï¼‰ãŒæ‹“ãä¸–ç•Œã€‚Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å¿…è¦ãªä»®æƒ³ç’°å¢ƒã‚’ãƒ„ãƒ¼ãƒ«ã«ãŠã¾ã‹ã›ã§ãã‚‹ã‚“ã§ã™ï¼</h2>
<dl class="field-list simple">
<dt class="field-odd">Event<span class="colon">:</span></dt>
<dd class="field-odd"><p>ã¿ã‚“ãªã®Pythonå‹‰å¼·ä¼š#108 LT</p>
</dd>
<dt class="field-even">Presented<span class="colon">:</span></dt>
<dd class="field-even"><p>2024/09/19 nikkie</p>
</dd>
</dl>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ã“ã®LTã¯</h3>
<ul class="simple">
<li><p>2024/09/27(é‡‘) 28(åœŸ) ã«æœ‰æ˜ã§é–‹å‚¬ã•ã‚Œã‚‹ <a class="reference external" href="https://pyconjp.connpass.com/event/324211/" rel="noopener noreferrer" target="_blank">PyCon JP 2024</a> ã®ãƒˆãƒ¼ã‚¯ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã™</p>
<ul>
<li><p><a class="reference external" href="https://2024.pycon.jp/ja/talk/89F3RQ" rel="noopener noreferrer" target="_blank">é‡‘æ›œ 15:50ã€œ 20F #pyconjp_1</a> åƒ•ã¨æ¡æ‰‹ğŸ¤</p></li>
</ul>
</li>
<li><p>ãŠå±Šã‘ã™ã‚‹å†…å®¹ã¯ã€ã¡ã‚‡ã£ã¨ã—ãŸ <strong>ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãã‚·ãƒ¼ãƒ³</strong> ã§çš†ã•ã‚“ã«ä½¿ã£ã¦ã‚‚ã‚‰ãˆãŸã‚‰å¬‰ã—ã„ã§ã™</p></li>
</ul>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">ã‚µãƒ³ãƒ—ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</h2>
<ul class="simple">
<li><p>PEPï¼ <a class="reference external" href="https://docs.python.org/ja/3/glossary.html#term-PEP" rel="noopener noreferrer" target="_blank">Python Enhancement Proposal</a> ï¼ˆPythonã®æ©Ÿèƒ½ææ¡ˆæ–‡æ›¸ï¼‰</p></li>
<li><p>PEPã®ä¸€è¦§ã‚’JSONå½¢å¼ã§å–å¾—ã§ãã‚‹ã¨çŸ¥ã£ãŸã®ã§ã‚„ã£ã¦ã¿ãŸã„</p></li>
<li><p><a class="reference external" href="https://peps.python.org/api/peps.json" rel="noopener noreferrer" target="_blank">https://peps.python.org/api/peps.json</a></p></li>
</ul>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ãŠã†ã‹ãª</h3>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/encode/httpx" rel="noopener noreferrer" target="_blank">httpx</a> ï¼šHTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆ<a class="reference external" href="https://2024.pycon.jp/ja/talk/MD99N8" rel="noopener noreferrer" target="_blank">é‡‘æ›œ 16:40ã€œ 20F #pyconjp_2</a>ï¼‰</p></li>
<li><p><a class="reference external" href="https://github.com/Textualize/rich" rel="noopener noreferrer" target="_blank">rich</a> ï¼šã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ãƒªãƒƒãƒãªãƒ†ã‚­ã‚¹ãƒˆã§å‡ºåŠ›</p></li>
</ul>
<p>è©¦ã™éš›ã¯ãŠå¥½ã¿ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«èª­ã¿æ›¿ãˆãã ã•ã„</p>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">PEPã®ä¸€è¦§ã‚’JSONå½¢å¼ã§å–å¾—ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</h3>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">example.py</span></div>
<pre><code class="python" data-noescape="" data-trim="">import httpx
from rich.pretty import pprint

resp = httpx.get("https://peps.python.org/api/peps.json")
data = resp.json()
pprint([(k, v["title"]) for k, v in data.items()][:10])
</code></pre>
</div>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã§ããŸã‹ã‚‰ã¨ã„ã£ã¦å®Ÿè¡Œã™ã‚‹ã¨</h3>
<pre data-id="id4"><code class="shell" data-noescape="" data-trim="">$ python example.py
Traceback (most recent call last):
  File "/.../example.py", line 1, in &lt;module&gt;
    import httpx
ModuleNotFoundError: No module named 'httpx'</code></pre>
<p><strong>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</strong> ãŒå¿…è¦ã§ã™</p>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ä»®æƒ³ç’°å¢ƒã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‹ã‚‰å‹•ã‹ã™</h3>
<pre data-id="id5"><code class="shell" data-noescape="" data-trim="">$ python -V
Python 3.12.6
$ python -m venv .venv --upgrade-deps
$ .venv/bin/python -m pip install httpx rich
$ .venv/bin/python example.py</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ä»®æƒ³ç’°å¢ƒã§å®Ÿè¡Œã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å‡ºåŠ›</h3>
<img alt="../_images/run_script_in_venv.png" src="../_images/run_script_in_venv.png"/>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">å®Ÿã¯ã€<strong>ç§ãŸã¡ãŒä»®æƒ³ç’°å¢ƒã‚’ä½œã‚‰ãªãã¦ã‚‚ã„ã„</strong> ã‚“ã§ã™ï¼</h2>
<ul class="simple">
<li><p>ã‚¿ã‚¤ãƒˆãƒ«ã«ã‚ã‚‹ã€ŒPEP 723ï¼ˆInline script metadataï¼‰ã€</p></li>
<li><p>ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãã€ãã‚Œã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸãƒ„ãƒ¼ãƒ«ã§å®Ÿè¡Œ</p></li>
</ul>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">Inline script metadataï¼ˆå†’é ­ã®ã‚³ãƒ¡ãƒ³ãƒˆï¼‰</h3>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">example.pyï¼ˆæ›´æ–°ç‰ˆï¼‰</span></div>
<pre><code class="python" data-line-numbers="1,2,3" data-noescape="" data-trim=""># /// script
# dependencies = ["httpx", "rich"]
# ///
import httpx
from rich.pretty import pprint

resp = httpx.get("https://peps.python.org/api/peps.json")
data = resp.json()
pprint([(k, v["title"]) for k, v in data.items()][:10])
</code></pre>
</div>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">Inline script metadataã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§å®Ÿè¡Œ</h3>
<pre data-id="id8"><code class="shell" data-noescape="" data-trim="">$ pipx run example.py</code></pre>
<pre data-id="id8"><code class="shell" data-noescape="" data-trim="">$ uv run example.py</code></pre>
<pre data-id="id8"><code class="shell" data-noescape="" data-trim="">$ hatch run example.py</code></pre>
<pre data-id="id8"><code class="shell" data-noescape="" data-trim="">$ pdm run example.py</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ãƒ„ãƒ¼ãƒ«ãŒä»®æƒ³ç’°å¢ƒã‚’ç”¨æ„ã—ã¦å®Ÿè¡Œï¼</h3>
<pre data-id="id9"><code class="txt" data-line-numbers="2,3" data-noescape="" data-trim="">% uv run example.py
Reading inline script metadata from: example.py
Installed 11 packages in 23ms
[
â”‚   ('1', 'PEP Purpose and Guidelines'),
â”‚   ('2', 'Procedure for Adding New Modules'),
â”‚   ('3', 'Guidelines for Handling Bug Reports'),
â”‚   ('4', 'Deprecation of Standard Modules'),
â”‚   ('5', 'Guidelines for Language Evolution'),
â”‚   ('6', 'Bug Fix Releases'),
â”‚   ('7', 'Style Guide for C Code'),
â”‚   ('8', 'Style Guide for Python Code'),
â”‚   ('9', 'Sample Plaintext PEP Template'),
â”‚   ('10', 'Voting Guidelines')
]</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">Inline script metadataã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ãŒã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã</h3>
<ol class="arabic simple">
<li><p>ãƒ„ãƒ¼ãƒ«ãŒmetadataã‚’èª­ã‚€</p></li>
<li><p>ãƒ„ãƒ¼ãƒ«ãŒ <strong>metadataã‚’æº€ãŸã™ä»®æƒ³ç’°å¢ƒã‚’ç”¨æ„</strong> ï¼ˆdependencies <em>ãªã©</em>ï¼‰</p></li>
<li><p>ãƒ„ãƒ¼ãƒ«ãŒ2ã®ä»®æƒ³ç’°å¢ƒã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ</p></li>
</ol>
<p>å¤©æ‰ï¼ ã‚ã‚ŠãŒã¨ã†ã€œï¼</p>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">ã“ã®ãƒˆãƒ¼ã‚¯ã§ä¼ãˆãŸã„ã“ã¨</h2>
<ul class="simple">
<li><p>Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãã¨ãã€<strong>Inline script metadataã‚’ãœã²ä½¿ã£ã¦</strong> ã¿ã¦ï¼</p></li>
<li><p>é–‹ç™ºè€…ãŒä»®æƒ³ç’°å¢ƒã®ç®¡ç†ã‹ã‚‰è§£æ”¾ã•ã‚Œã¾ã™ï¼</p></li>
<li><p>ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒä¾å­˜ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦æ›¸ãã€ã‚µãƒãƒ¼ãƒˆã—ãŸãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã ã‘</p></li>
</ul>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ç¶šãã¯9/27(é‡‘)ã®PyCon JP 2024ã«ã¦</h3>
<p><a class="reference external" href="https://2024.pycon.jp/ja/talk/89F3RQ" rel="noopener noreferrer" target="_blank">é‡‘æ›œ 15:50ã€œ 20F #pyconjp_1</a></p>
<p>ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ</p>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ãŠå‰ã€èª°ã ã£ãŸã®ã‚ˆï¼Ÿ â€• nikkieã§ã—ãŸ</h3>
<ul class="simple">
<li><p><span class="fab fa-github"></span> <a class="reference external" href="https://github.com/ftnext" rel="noopener noreferrer" target="_blank">@ftnext</a> ï¼ <a class="reference external" href="https://nikkie-ftnext.hatenablog.com/" rel="noopener noreferrer" target="_blank">ãƒ–ãƒ­ã‚°</a> é€£ç¶š <strong>670</strong> æ—¥çªç ´</p></li>
<li><p>ãƒ¦ãƒ¼ã‚¶ãƒ™ãƒ¼ã‚¹ã®æ©Ÿæ¢°å­¦ç¿’ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼ˆ<a class="reference external" href="https://hrmos.co/pages/uzabase/jobs/1829077236709650481" rel="noopener noreferrer" target="_blank">We're hiring!</a>ï¼‰</p></li>
<li><p><a class="reference external" href="https://startpython.connpass.com/" rel="noopener noreferrer" target="_blank">ã¿ã‚“ãªã®Pythonå‹‰å¼·ä¼š</a> ã‚¹ã‚¿ãƒƒãƒ•ãƒ»4ä»£ç›®LTç‹å­</p></li>
<li><p>å°ã•ãªOSSã®é–‹ç™ºãŒå¥½ãï¼šä»£è¡¨ä½œã¯Sphinxæ‹¡å¼µ <a class="reference external" href="https://github.com/ftnext/sphinx-new-tab-link" rel="noopener noreferrer" target="_blank">sphinx-new-tab-link</a></p></li>
</ul>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">EOF</h3>
</section>
</section>

        </div>
    </div>
    
    <script src="../_static/revealjs4/dist/reveal.js"></script>
    
    
      <script src="../_static/revealjs4/plugin/highlight/highlight.js"></script>
      <script src="../_static/revealjs4/plugin/notes/notes.js"></script>
      <script src="../_static/revealjs4/plugin/copycode/copycode.js"></script>
      
    
    <script>
        var revealjsConfig = new Object();
        Object.assign(revealjsConfig, {"controls": true, "progress": true, "history": true, "center": true, "transition": "none", "slideNumber": "c/t", "scrollActivationWidth": null});
        
        
        
          revealjsConfig.plugins = [
            RevealHighlight,RevealNotes,CopyCode,
          ];
        
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize(revealjsConfig);
    </script>

  </body>
</html>