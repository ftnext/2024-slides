ã‚³ãƒãƒ³ãƒ‰ã”ã¨ã«å®Ÿè£…ï¼ˆã‚¯ãƒ©ã‚¹ï¼‰ãŒã‚ã‚‹
======================================================================

.. TODO ã‚‚ã†ã¡ã‚‡ã„ã„ã„è¦‹å‡ºã—ã«ã§ãã‚‹ï¼Ÿ

``registerEditorAction()``
--------------------------------------------------

.. code-block:: typescript

    registerEditorAction(LowerCaseAction);

https://github.com/microsoft/vscode/blob/1.88.1/src/vs/editor/contrib/linesOperations/browser/linesOperations.ts#L1302-L1320

â€»ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã§æä¾›ã•ã‚Œã‚‹ä»•çµ„ã¿ã¯ã€ã“ã“ã£ã½ã„ãã‚‰ã„ã«ã¨ã©ã‚ã¾ã™

:guilabel:`Transform to` ã‚³ãƒãƒ³ãƒ‰ã«å¯¾å¿œã™ã‚‹ã‚¯ãƒ©ã‚¹
--------------------------------------------------

* ``UpperCaseAction``
* ``LowerCaseAction``
* ``TitleCaseAction``
* ``SnakeCaseAction``
* ``CamelCaseAction``
* ``PascalCaseAction``
* ``KebabCaseAction``

å…±é€šã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ ``AbstractCaseAction``
--------------------------------------------------

.. code-block:: typescript

    // https://github.com/microsoft/vscode/blob/1.88.1/src/vs/editor/contrib/linesOperations/browser/linesOperations.ts#L1088
    export class LowerCaseAction extends AbstractCaseAction {
        // çœç•¥
    }

* Caseã«é–¢ã™ã‚‹ **æŠ½è±¡** Action
* ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã§å…·ä½“ã®Actionã‚’å®Ÿè£…ã™ã‚‹ï¼ˆä¾‹ï¼šå°æ–‡å­—ã«ã™ã‚‹ï¼‰

.. TODO è–„ã„ãƒ¬ã‚¤ãƒ¤ã‚’ã„ãã¤ã‚‚ä½¿ã£ãŸç¶™æ‰¿é–¢ä¿‚ã‚’è£œè¶³

``AbstractCaseAction`` ã¯ *Template Method* ãƒ‘ã‚¿ãƒ¼ãƒ³
------------------------------------------------------------

.. code-block:: typescript

    // https://github.com/microsoft/vscode/blob/1.88.1/src/vs/editor/contrib/linesOperations/browser/linesOperations.ts#L1032
    export abstract class AbstractCaseAction extends EditorAction {
            public run(_accessor: ServicesAccessor, editor: ICodeEditor): void {}

            protected abstract _modifyText(text: string, wordSeparators: string): string;
    }

**ç©´åŸ‹ã‚å•é¡Œ** ã«ãªã£ã¦ã„ã‚‹
------------------------------------------------------------

* ``_modifyText`` ï¼š **ãƒ†ã‚­ã‚¹ãƒˆã®å¤‰æ›´æ–¹æ³•ã ã‘**ã€å…·ä½“ã®Caseã®Actionã§åŸ‹ã‚ã‚Œã°ã‚ˆã„
* å‚è€ƒ `èª­æ›¸ãƒ­ã‚° | #ã¡ã‚‡ã†ãœã¤æœ¬ ç¬¬8ç«  Template Methodãƒ‘ã‚¿ãƒ¼ãƒ³ ã€œç©´åŸ‹ã‚å•é¡Œã«ã™ã‚‹ã€œ <https://nikkie-ftnext.hatenablog.com/entry/the-transcendent-book-chapter8-design-patterns-template-method>`__

``_modifyText()`` ã®å®Ÿè£…ã‚’è¦‹ã‚‹
------------------------------------------------------------

* ``LowerCaseAction``
* ``TitleCaseAction``

1ï¸âƒ£ ``LowerCaseAction``
======================================================================

* **JavaScriptã®ãƒ¡ã‚½ãƒƒãƒ‰** ã‚’ä½¿ã†ãƒ‘ã‚¿ãƒ¼ãƒ³
* ï¼ˆç§ã®ç†è§£ãŒé›‘ã™ãã‚‹ã‹ã‚‚ã§ã™ãŒã€ï¼‰TypeScriptã¯å‹ä»˜ãã®JavaScript

.. https://twitter.com/ftnext/status/1603355872809263104

ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚ˆã‚Š
--------------------------------------------------

``'HELLO WORLD'`` â¡ï¸ ``'hello world'``

https://github.com/microsoft/vscode/blob/1.88.1/src/vs/editor/contrib/linesOperations/test/browser/linesOperations.test.ts#L677

ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§å®Ÿè£…ï¼š ``toLocaleLowerCase()``
--------------------------------------------------

    å‘¼ã³å‡ºã—ãŸæ–‡å­—åˆ—ã®å€¤ã‚’ã€ãƒ­ã‚±ãƒ¼ãƒ«ã«ä¾å­˜ã—ãŸå¯¾å¿œä»˜ã‘ã«åŸºã¥ã„ã¦å°æ–‡å­—ã«å¤‰æ›ã—ã¦è¿”ã—ã¾ã™ã€‚

MDN `String.prototype.toLocaleLowerCase() <https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/toLocaleLowerCase>`__

``LowerCaseAction`` ã® ``_modifyText()``
--------------------------------------------------

.. code-block:: typescript

    // https://github.com/microsoft/vscode/blob/1.88.1/src/vs/editor/contrib/linesOperations/browser/linesOperations.ts#L1098-L1100
	protected _modifyText(text: string, wordSeparators: string): string {
		return text.toLocaleLowerCase();
	}

2ï¸âƒ£ ``TitleCaseAction``
======================================================================

* æ­£è¦è¡¨ç¾ã‚’ä½¿ã†ãƒ‘ã‚¿ãƒ¼ãƒ³

ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚ˆã‚Š
--------------------------------------------------

.. list-table::

    * - å…¥åŠ›
      - å‡ºåŠ›
    * - ``'HELLO WORLD'``
      - ``'Hello World'``
    * - ``'foO\'baR\'BaZ'``
      - ``'Foo\'bar\'baz'``
    * - ``'\'physician\'s assistant\''``
      - ``'\'Physician\'s Assistant\''``

https://github.com/microsoft/vscode/blob/1.88.1/src/vs/editor/contrib/linesOperations/test/browser/linesOperations.test.ts#L790

æ­£è¦è¡¨ç¾ã¯ã€ã“ã‚Œã ï¼ï¼
--------------------------------------------------

.. code-block:: typescript

    new RegExp('(^|[^\\p{L}\\p{N}\']|((^|\\P{L})\'))\\p{L}', 'gmu')

https://github.com/microsoft/vscode/blob/1.88.1/src/vs/editor/contrib/linesOperations/browser/linesOperations.ts#L1135

æ­£è¦è¡¨ç¾ãƒªãƒ†ãƒ©ãƒ«ã®ä½œæˆã¯ **2é€šã‚Š**
--------------------------------------------------

* ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã§å›²ã‚€ ``/ab+c/g``
* ``new RegExp("ab+c", "g")``

MDN `æ­£è¦è¡¨ç¾ã®ä½œæˆ <https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Regular_Expressions#%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%8F%BE%E3%81%AE%E4%BD%9C%E6%88%90>`__

``RegExp`` ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å¼•æ•°
--------------------------------------------------

* ç¬¬1å¼•æ•°ãŒãƒ‘ã‚¿ãƒ¼ãƒ³

    * ``\\p`` ã¯ ``\p`` ã® **ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—**

* ç¬¬2å¼•æ•°ãŒãƒ•ãƒ©ã‚°

    * ã‚°ãƒ­ãƒ¼ãƒãƒ«æ¤œç´¢(g)ãƒ»è¤‡æ•°è¡Œã®æ¤œç´¢(m)ãƒ»unicode(u)

.. æ­£ç¢ºã«ã¯ BackwardsCompatibleRegExp ã§ã‚ã‚‹ç‚¹ã«è§¦ã‚Œã‚‹

æ­£è¦è¡¨ç¾ ``'(^|[^\\p{L}\\p{N}\']|((^|\\P{L})\'))\\p{L}'`` ğŸ¤¯
======================================================================

.. code-block:: javascript

    new RegExp('(^|[^\\p{L}\\p{N}\']|((^|\\P{L})\'))\\p{L}', 'gmu');
    // /(^|[^\p{L}\p{N}']|((^|\P{L})'))\p{L}/gmu

``\p{L}``
--------------------------------------------------

* `Unicodeæ–‡å­—ã‚¯ãƒ©ã‚¹ã‚¨ã‚¹ã‚±ãƒ¼ãƒ— <https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Regular_expressions/Unicode_character_class_escape>`__
* ä¸€èˆ¬ã‚«ãƒ†ã‚´ãƒªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒ *L* etter ã® **Unicodeæ–‡å­—ã®é›†åˆ**
* **æ–‡å­—ã«ãƒãƒƒãƒ** ã™ã‚‹ã€‚è¨˜å·ã‚„ç©ºç™½æ–‡å­—ã«ã¯ãƒãƒƒãƒã—ãªã„

3ã¤ã®ã€Œã¾ãŸã¯ã€ï¼ˆ ``|`` ï¼‰
--------------------------------------------------

* ``^``
* ``[^\\p{L}\\p{N}\']``
* ``((^|\\P{L})\')``

ã“ã‚Œã‚‰ã®ã‚ã¨ã« ``\\p{L}`` ãŒç¶šã

``^`` å…¥åŠ›ã®å…ˆé ­
--------------------------------------------------

* mãƒ•ãƒ©ã‚°ã§ã€Œ*æ”¹è¡Œæ–‡å­—ã®ç›´å¾Œã«ã‚‚ä¸€è‡´*ã€
* ``'(^)\\p{L}'`` ã¯ **å…ˆé ­ã®æ–‡å­—** ã«ä¸€è‡´ï¼ˆ ``'hello world'`` ã® ``'h'`` ï¼‰

MDN `å¢ƒç•Œå‹ã®ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ <https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Regular_expressions/Assertions#%E5%A2%83%E7%95%8C%E5%9E%8B%E3%81%AE%E3%82%A2%E3%82%B5%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3>`__

æ–‡å­—ã‚¯ãƒ©ã‚¹ ``[^\\p{L}\\p{N}\']``
--------------------------------------------------

* å¦å®šã® ``^``
* ã€ŒUnicodeã§Letterã¾ãŸã¯Numberã€ã¾ãŸã¯ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã€ **ã§ãªã„**
* ``([^\\p{L}\\p{N}\'])\\p{L}`` ã¯ ``'hello world'`` ã® ``' w'`` ã«ãƒãƒƒãƒ

MDN `æ–‡å­—ã‚¯ãƒ©ã‚¹ ç¨®é¡ <https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Regular_expressions/Character_classes#%E7%A8%AE%E9%A1%9E>`__

``((^|\\P{L})\')``
--------------------------------------------------

* ``\P{L}`` ã¯ã€ ``\p{L}`` ã®å¦å®šï¼ˆã™ãªã‚ã¡ã€ **æ–‡å­—ã§ãªã„** ï¼‰

    * ``(^|\\P{L})`` ï¼šå…ˆé ­ã¾ãŸã¯ã€æ–‡å­—ã§ãªã„

* ``((^|\\P{L})\')\\p{L}`` ã¯ ``'\'physician\'s assistant\''`` ã§ ``'\'p'`` ã«ãƒãƒƒãƒ

æ­£è¦è¡¨ç¾ã®åã¯ ``titleBoundary``
--------------------------------------------------

* ã‚¿ã‚¤ãƒˆãƒ«ã‚±ãƒ¼ã‚¹ã«ã™ã‚‹ä¸Šã§ã® **å¢ƒç•Œ**
* ``'hello world'`` ã§ã‚ã‚Œã°ã€å¢ƒç•Œã¯ ``'h'`` ã¨ ``' w'``

ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚°ãƒ«ãƒ¼ãƒ—ã® ``()``
--------------------------------------------------

* ``titleBoundary`` ã®æ­£è¦è¡¨ç¾ã¯ ``()`` ã‚’ï¼ˆå¹¾é‡ã‚‚ï¼‰å«ã‚€
* ä¸€è‡´ã—ãŸå†…å®¹ã‚’è¨˜æ†¶ã§ãã‚‹ï¼ˆã®ã§ ``'hello world'`` ã‹ã‚‰ ``'h'`` ã¨ ``' w'`` ãŒå–å¾—ã§ãã‚‹ï¼‰

MDN `ã‚°ãƒ«ãƒ¼ãƒ—ã¨å¾Œæ–¹å‚ç…§ ç¨®é¡ <https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Regular_expressions/Groups_and_backreferences#%E7%A8%AE%E9%A1%9E>`__

ä»¥ä¸Šã‚’ã¾ã¨ã‚ã¦ã€ ``_modifyText()``
======================================================================

.. code-block:: typescript

    // https://github.com/microsoft/vscode/blob/1.88.1/src/vs/editor/contrib/linesOperations/browser/linesOperations.ts#L1152-L1154
    return text
            .toLocaleLowerCase()
            .replace(titleBoundary, (b) => b.toLocaleUpperCase());

ã‚¿ã‚¤ãƒˆãƒ«ã‚±ãƒ¼ã‚¹ã®å¢ƒç•Œéƒ¨åˆ†ã‚’å¤§æ–‡å­—ã«ã™ã‚‹
--------------------------------------------------

1. ãƒ†ã‚­ã‚¹ãƒˆå…¨ä½“ã‚’ **å°æ–‡å­—** ã«ã™ã‚‹
2. ã‚¿ã‚¤ãƒˆãƒ«ã‚±ãƒ¼ã‚¹ã® **å¢ƒç•Œéƒ¨åˆ†** ï¼ˆã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦ã„ã‚‹ï¼‰ã‚’ **å¤§æ–‡å­—** ã«ã™ã‚‹

ğŸŒ¯å®Ÿè£…ã¾ã§è¦—ã„ãŸã‚¯ã‚¤ãƒƒã‚¯ãƒ„ã‚¢ãƒ¼ã®ã¾ã¨ã‚
======================================================================

* Transformã‚³ãƒãƒ³ãƒ‰ã”ã¨ã®ã‚¯ãƒ©ã‚¹ï¼šTemplate Methodãƒ‘ã‚¿ãƒ¼ãƒ³
* JavaScriptã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦å¤§æ–‡å­—åŒ–ï¼å°æ–‡å­—åŒ–
* æ­£è¦è¡¨ç¾ã‚’ä½¿ã£ãŸå®Ÿè£…ï¼ˆç‰¹ã«ã€Unicodeæ–‡å­—ã‚¯ãƒ©ã‚¹ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ï¼‰
