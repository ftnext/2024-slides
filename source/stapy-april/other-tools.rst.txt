pipã®ãƒšã‚¤ãƒ³ã‚’è§£æ¶ˆã™ã‚‹ç¨®ã€…ã®ãƒ„ãƒ¼ãƒ«
======================================================================

* çŸ¢ç¶™ãæ—©âœ¨ã«ç´¹ä»‹ã€‚**æ°—ã«ãªã‚‹ã‚‚ã®ã¯ãœã²ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’**
* ã‚µãƒ³ãƒ—ãƒ«ã¯ğŸˆ https://github.com/ftnext/2024-slides/tree/main/samplecode/python-environments
* pipã€Œã†ã†ã€‚ã€‚ä¿ºãŒå¼±ãã¦ã€ã”ã‚ã‚“ã€‚ã€‚ã€

ä»®æƒ³ç’°å¢ƒã¨pipã‚’ãƒ©ãƒƒãƒ—ã—ã¦ **easy** ã«ã—ãŸãƒ„ãƒ¼ãƒ«ãŸã¡æ›°ã
----------------------------------------------------------------------

* ä»®æƒ³ç’°å¢ƒã® **ç®¡ç†**ã€ä¿ºé”ã«ä»»ã›ã¦ï¼ï¼
* ç’°å¢ƒã® **å†ç¾**ã€ç°¡å˜ã«ã—ã¨ã„ãŸã‚ˆï¼
* âš ï¸ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ã„ã†è¦³ç‚¹ã«é™ã‚‹ï¼ˆã‚‚ã£ã¨è‰²ã€…ã§ãã¾ã™ï¼‰

Poetry
======================================================================

.. code-block:: shell

    $ poetry --version
    Poetry (version 1.8.2)

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
--------------------------------------------------

.. code-block:: shell

    $ curl -sSL https://install.python-poetry.org | python3 -
    $ # ã¾ãŸã¯ pipx install poetry

https://python-poetry.org/docs/#installation

å°å…¥
--------------------------------------------------

* æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ :command:`poetry new` ã§ä½œæˆ
* æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ :command:`poetry init` ã§å°å…¥

https://python-poetry.org/docs/basic-usage/#project-setup

Poetryã€Œä»®æƒ³ç’°å¢ƒã®ç®¡ç†ã¯ä»»ã›ã¦ï¼ã€
--------------------------------------------------

* :command:`poetry add` / remove
* :command:`poetry shell` ã‚„ :command:`poetry run` ã§ä»®æƒ³ç’°å¢ƒã‚’æœ‰åŠ¹ã«ã—ã¦å®Ÿè¡Œã§ãã‚‹

https://python-poetry.org/docs/basic-usage/#using-your-virtual-environment

Pipenv
======================================================================

.. code-block:: shell

    $ pipenv --version
    pipenv, version 2023.12.1

ğŸ”°æœ¬ç™ºè¡¨ã‚’æ°—ã«è§¦ã£ãŸã®ã§ã€è£œè¶³å¤§æ­“è¿ï¼

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
--------------------------------------------------

.. code-block:: shell

    $ pipx install pipenv

https://github.com/pypa/pipenv/tree/v2023.12.1?tab=readme-ov-file#installation

å°å…¥
--------------------------------------------------

* æ–°è¦ä½œæˆï¼šç©ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ :command:`pipenv --python 3.12`

Pipenvã€Œä»®æƒ³ç’°å¢ƒã®ç®¡ç†ã¯ä»»ã›ã¦ï¼ã€
--------------------------------------------------

* :command:`pipenv install` / uninstall
* :command:`pipenv shell` ã‚„ :command:`pipenv run` ã§ä»®æƒ³ç’°å¢ƒã‚’æœ‰åŠ¹ã«ã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹

https://pipenv.pypa.io/en/latest/installation.html#installing-packages-for-your-project

æ™‚é–“ãªã„ã®ã«è„±ç·šï¼špipxã£ã¦ã€ä½•ã‚ˆ
======================================================================

* ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ *ã‚³ãƒãƒ³ãƒ‰* ã§ä½¿ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã€éš”é›¢ã—ãŸä»®æƒ³ç’°å¢ƒã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã‚Œã‚‹ï¼ˆ:command:`pipx install`ï¼‰
* :command:`pipx run` ãŒå€‹äººçš„ã«ãƒ¡ãƒãƒ£ç†±ã„ğŸ”¥ğŸ”¥ğŸ”¥ï¼š `Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æœªæ¥ã€‚pipxãŒéƒ¨åˆ†çš„ã«ã‚µãƒãƒ¼ãƒˆã—ãŸInline script metadataï¼ˆPEP 723ï¼‰ã‚’è§¦ã‚‹ <https://nikkie-ftnext.hatenablog.com/entry/henry-schreiner-pipx-supports-pep723-dependencies-metadata>`__

Hatch
======================================================================

.. code-block:: shell

    $ hatch --version
    Hatch, version 1.9.7

ğŸ”°æœ¬ç™ºè¡¨ã‚’æ°—ã«è§¦ã£ãŸã®ã§ã€è£œè¶³å¤§æ­“è¿ï¼

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
--------------------------------------------------

* ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãŒã‚ã‚‹
* ã¾ãŸã¯ ``pipx install hatch``

https://hatch.pypa.io/latest/install/#installers

å°å…¥
--------------------------------------------------

* æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ :command:`hatch new` ã§ä½œæˆ
* æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ :command:`hatch new --init` ã§å°å…¥

https://hatch.pypa.io/latest/intro/#setup

Hatchã€Œ:file:`pyproject.toml` æ›¸ã„ã¦ã€
--------------------------------------------------

* é–‹ç™ºè€…ãŒ :file:`pyproject.toml` ã‚’æ›¸ãæ¨¡æ§˜
* :command:`hatch shell` ã‚„ :command:`hatch run` ã§ :file:`pyproject.toml` **ã®é€šã‚Šã®ä»®æƒ³ç’°å¢ƒ** ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹ï¼ˆå®£è¨€çš„ã ï¼‰

https://hatch.pypa.io/latest/environment/#dependencies

PDM
======================================================================

.. code-block:: shell

    $ pdm --version
    PDM, version 2.15.1

ğŸ”°æœ¬ç™ºè¡¨ã‚’æ°—ã«è§¦ã£ãŸã®ã§ã€è£œè¶³å¤§æ­“è¿ï¼

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
--------------------------------------------------

.. code-block:: shell

    $ curl -sSL https://pdm-project.org/install-pdm.py | python3 -

https://pdm-project.org/en/stable/#installation

å°å…¥
--------------------------------------------------

* æ–°è¦ä½œæˆï¼šç©ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ :command:`pdm new`
* å´ä¸‹ã•ã‚ŒãŸ `PEP 582 <https://peps.python.org/pep-0582/>`__ ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€ä¾å­˜ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª :file:`__pypackages__` ã‚’ä½œã‚‹ã“ã¨ã‚‚ã§ãã‚‹

https://pdm-project.org/en/stable/usage/project/

PDMã€Œä»®æƒ³ç’°å¢ƒã®ç®¡ç†ã¯ä»»ã›ã¦ï¼ã€
--------------------------------------------------

* :command:`pdm add` / remove

    * https://pdm-project.org/en/stable/usage/dependency/

* :command:`poetry run` ã§ä»®æƒ³ç’°å¢ƒã‚’æœ‰åŠ¹ã«ã—ã¦å®Ÿè¡Œã§ãã‚‹

    * https://pdm-project.org/en/stable/usage/venv/

Rye
======================================================================

.. code-block:: shell

    $ rye --version
    rye 0.33.0
    commit: 0.33.0 (58523f69f 2024-04-24)
    platform: macos (aarch64)
    self-python: not bootstrapped (target: cpython@3.12)
    symlink support: true
    uv enabled: false

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€Œ**Rust** ã®ã‚ˆã†ã«ç°¡å˜ğŸ°ã€
--------------------------------------------------

.. code-block:: shell

    curl -sSf https://rye-up.com/get | bash

https://rye-up.com/guide/installation/

å°å…¥ã€ŒPythonã‚‚ç®¡ç†ã—ã¨ãã¾ã™ã­ã€œã€
--------------------------------------------------

* æ–°è¦ä½œæˆï¼š:command:`rye init`
* Ryeã§ç®¡ç†ã—ã¦ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ :command:`rye sync`

https://rye-up.com/guide/basics/

é–‹ç™ºè€…ã¯ :command:`rye sync` ã‚’å©ã
--------------------------------------------------

* :command:`rye add` / remove ã—ã¦ :command:`rye sync`
* :command:`rye run` ã§ä»®æƒ³ç’°å¢ƒã‚’æœ‰åŠ¹ã«ã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹

Ryeã€Œã©ã†ï¼Ÿç°¡å˜ã§ã—ã‚‡ï¼Ÿã€
--------------------------------------------------

* virtualenvã‚„pip-toolsãªã©ã®æ—¢å­˜ãƒ„ãƒ¼ãƒ«ã‚’ãƒãƒ³ãƒ‰ãƒ«ã—ã¦ã€easyã«æä¾›
* ä»®æƒ³ç’°å¢ƒ :file:`.venv` ã¯ã‚ã‚‹ãŒã€é–‹ç™ºè€…ãŒæ‰‹å‡ºã—ã§ããªã„ï¼ˆnikkieã€Œsimpleãªã®ã ã‚ã†ã‹ï¼Ÿã€ï¼‰

æ‹™ãƒ–ãƒ­ã‚°ã‚ˆã‚Š ğŸƒâ€â™‚ï¸
--------------------------------------------------

* `ç´ æŒ¯ã‚Šã®è¨˜ï¼šRyeã«æ…£ã‚Œã‚‹ãŸã‚ã«ã€Pythonã§è‡ªåˆ†ã ã‘ã®ã‚¯ã‚½ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã‚‹ <https://nikkie-ftnext.hatenablog.com/entry/uv-first-trial-different-implementation-venv>`__
* `Q: Pythonã§ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«pipã‚’å«ã¾ãªã„ä»®æƒ³ç’°å¢ƒã‚’ä½œã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚â—¯ã‹â˜“ã‹ <https://nikkie-ftnext.hatenablog.com/entry/create-python-virtual-environments-without-pip>`__

uv
======================================================================

.. code-block:: shell

    $ uv --version
    uv 0.1.38

uvã¯ã€**Rustã§å†å®Ÿè£…** ã—ãŸvenvã¨pip
--------------------------------------------------

* Pythonã‹ã‚‰Rustã«å¤‰ã‚ã£ãŸã“ã¨ã§ **é«˜é€Ÿ** ã«å‹•ä½œï¼ˆå£²ã‚Šã«ã—ã¦ã„ã‚‹ï¼‰
* ãŸã ã—ã€venvã‚„pipã®è¤‡è£½ã«ã™ã‚‹æ°—ã¯ãªã„ã¨æ˜è¨€ï¼ˆé–‹ç™ºè€…ã¯ *è¦šãˆç›´ã—* ãŒå¿…è¦ï¼‰
* Ryeã¯pipã®ä»£ã‚ã‚Šã«uvã‚’ä½¿ãˆã‚‹

.. https://twitter.com/ftnext/status/1779390547385610354

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
--------------------------------------------------

.. code-block:: shell

    $ curl -LsSf https://astral.sh/uv/install.sh | sh
    $ # ã¾ãŸã¯ pipx install uv

https://github.com/astral-sh/uv/tree/0.1.38?tab=readme-ov-file#getting-started

å°å…¥ï¼šuvã§ä»®æƒ³ç’°å¢ƒã‚’ä½œã‚‹
--------------------------------------------------

.. code-block:: shell

    $ uv venv

* :file:`.venv` ã¨ã„ã†åå‰ã®ä»®æƒ³ç’°å¢ƒãŒã§ãã‚‹
* Pythonã®venvã‚„virtualenvã§ä½œã£ãŸä»®æƒ³ç’°å¢ƒã¨ã¯ **äº’æ›æ€§ãŒãªã„**

uvã€Œä¿ºã¯ã€é€Ÿã„ã€‚ã‚ã€ç’°å¢ƒã®å†ç¾ã¯ **äººæ‰‹** ã§ãŠé¡˜ã„ã—ã¾ã™ã€
------------------------------------------------------------

.. code-block:: shell

    $ uv pip install ...
    $ uv pip freeze > requirements.txt
    $ uv pip sync requirements.txt

å‚è€ƒ ğŸƒâ€â™‚ï¸
--------------------------------------------------

* `Rustè£½ã®Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«ã€Œuvã€ã‚’ä½¿ã£ã¦ã¿ã‚ˆã† <https://gihyo.jp/article/2024/03/monthly-python-2403>`__
* æ‹™ãƒ–ãƒ­ã‚° `uvãŠè©¦ã—è¨˜ï¼šuv venvã§ä½œã£ãŸä»®æƒ³ç’°å¢ƒã§pip installã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚uv pip installã—ã¾ã—ã‚‡ã† <https://nikkie-ftnext.hatenablog.com/entry/uv-first-trial-different-implementation-venv>`__
