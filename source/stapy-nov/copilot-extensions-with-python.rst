======================================================================
Pythonã§ã‚‚GitHub Copilot Extensionsä½œã‚Œã‚‹ã‚‚ã‚“ï¼
======================================================================

Pythonã§ã‚‚GitHub Copilot Extensionsä½œã‚Œã‚‹ã‚‚ã‚“ï¼
======================================================================

:Event: ã¿ã‚“ãªã®Pythonå‹‰å¼·ä¼š#110 LT
:Presented: 2024/11/14 nikkie

ãŠå‰ã€èª°ã‚ˆ
======================================================================

* nikkie @ Copilotã‚’é¦¬è»Šé¦¬ã®ã‚ˆã†ã«åƒã‹ã›éšŠ
* æ©Ÿæ¢°å­¦ç¿’ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ»è‡ªç„¶è¨€èªå‡¦ç†ï¼ˆ`We're hiring! <https://hrmos.co/pages/uzabase/jobs/1829077236709650481>`__ï¼‰
* `ã¿ã‚“ãªã®Pythonå‹‰å¼·ä¼š <https://startpython.connpass.com/>`__ ã‚¹ã‚¿ãƒƒãƒ•ãƒ»4ä»£ç›®LTç‹å­

.. image:: ../_static/uzabase-white-logo.png

GitHub Copilot Extensionsã£ã¦ã€ä½•ã‚ˆ
======================================================================

èã„ãŸã“ã¨ã‚ã‚Šã¾ã™ã‹ï¼ŸğŸ™‹â€â™‚ï¸

ã¾ãš GitHub Copilot
--------------------------------------------------

**AI ãƒšã‚¢ ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼**

`GitHub Copilot ã¨ã¯ä½•ã§ã™ã‹? <https://docs.github.com/ja/copilot/about-github-copilot/what-is-github-copilot>`__
------------------------------------------------------------------------------------------------------------------------------------------------------

    GitHub Copilot ã¯ AI ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰ã‚’ã‚ˆã‚Šé€Ÿãæ¥½ã«è¨˜è¿°ã§ãã‚‹ãŸã‚ã€å•é¡Œè§£æ±ºã¨ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚Šå¤šãã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’é›†ä¸­ã§ãã¾ã™ã€‚

æ§˜ã€…ãªæ©Ÿèƒ½ã‚’æ­è¼‰
--------------------------------------------------

:ã‚³ãƒ¼ãƒ‰è£œå®Œ: ç¶šãã‚³ãƒ¼ãƒ‰ã‚’ææ¡ˆã—ã¦ãã‚Œã‚‹ã€‚æ¡ç”¨ã—ã¦å°‘ã—ç›´ã™ã ã‘
:ãƒãƒ£ãƒƒãƒˆ: ChatGPTãŒVS Codeã«ä½ã‚“ã§ã„ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚è‰²ã€…èã‘ã¡ã‚ƒã†

ã»ã‹ã«ã‚‚ã¾ã ã¾ã ï¼ ãªãŠé€²åŒ–ä¸­ï¼

Copilot æ£²æ¯å ´æ‰€
--------------------------------------------------

èª²é‡‘ã—ã¦æœ‰åŠ¹ã«ã™ã‚‹ã¨

* VS Codeï¼ˆ`æ‹¡å¼µ <https://marketplace.visualstudio.com/items?itemName=GitHub.copilot>`__ ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‰
* ãƒ–ãƒ©ã‚¦ã‚¶ã§é–²è¦§ã—ã¦ã„ã‚‹ GitHub ã®ä¸­ (github.com)

ã”å‚è€ƒ
--------------------------------------------------

.. raw:: html

    <iframe class="speakerdeck-iframe" style="border: 0px; background: rgba(0, 0, 0, 0.1) padding-box; margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 100%; height: auto; aspect-ratio: 560 / 315;" frameborder="0" src="https://speakerdeck.com/player/21bcfa0ac76a426e8b39ce92884a9f2a?slide=1" title="GitHub Copilot Tips and Tricks" allowfullscreen="true" data-ratio="1.7777777777777777"></iframe>

GitHub Copilot **Extensions**
======================================================================

Extensionï¼æ‹¡å¼µ

æ‹¡å¼µã€2ã¤ã®æ–¹å‘æ€§
--------------------------------------------------

:VS Code ãƒãƒ£ãƒƒãƒˆæ‹¡å¼µæ©Ÿèƒ½: VS Codeæ‹¡å¼µã¨ã—ã¦Copilot Chatã‚’æ‹¡å¼µã§ãã‚‹ï¼ˆ@ã™ã‚‹å…ˆã® *ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ*ï¼‰
:GitHub Copilot Extensions: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œã‚Œã‚‹ã€‚ã“ã®LTã®æœ¬é¡Œ

`Copilot æ‹¡å¼µæ©Ÿèƒ½ã®æ§‹ç¯‰ã«ã¤ã„ã¦ <https://docs.github.com/ja/copilot/building-copilot-extensions/about-building-copilot-extensions>`__

GitHub Copilot Extensions
--------------------------------------------------

* GitHub Copilotã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã€ **ç‹¬è‡ªã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ** ï¼ˆCopilot Chatã®ç›¸æ‰‹ï¼‰ã‚’ä½œã‚Œã‚‹
* GitHubãŒç”¨æ„ã™ã‚‹ ``/chat/completions`` ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ãˆã‚‹
* ä¾‹ãˆã°ç‰¹å®šã®ãƒªãƒã‚¸ãƒˆãƒªã§RAGã‚’ã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§ï¼‰

æœéƒ¨ã•ã‚“ã®ç™ºè¡¨ã§çŸ¥ã‚Šã¾ã—ãŸ
--------------------------------------------------

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/UKpbIv0_J4A?si=DgWvs__rNEf6PMAj&amp;start=1364" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

å®Ÿè£…ä¾‹
--------------------------------------------------

* https://github.com/copilot-extensions
* Node.js, TypeScript
* Go

**Python** ã§ã‚‚GitHub Copilot Extensionsä½œã‚Œã‚‹ã‚‚ã‚“ï¼
======================================================================

å¾—æ„ãªPythonã‚’ä½¿ã„ãŸã„...ï¼
--------------------------------------------------

* Hello worldã«ã‚ãŸã‚‹ `blackbeard-extension <https://github.com/copilot-extensions/blackbeard-extension>`__
* æµ·è³Šé»’ã²ã’ã¨ã—ã¦Chatã«å¿œã˜ã‚‹ï¼ˆâ€»ONE PIECEã§ã¯ãªã„ï¼‰
* Node.jsã«ã‚ˆã‚‹å®Ÿè£…

blackbeard-extension (Node.js) æŠœç²‹
--------------------------------------------------

.. code-block:: javascript

  // https://github.com/copilot-extensions/blackbeard-extension/blob/11b5a9abaec14f57ee1c92350bf64553411deb02/index.js#L7-L48
  app.post("/", express.json(), async (req, res) => {
    const payload = req.body;
    const messages = payload.messages;
    messages.unshift({
      role: "system", content: "You are a helpful assistant that replies to user messages as if you were the Blackbeard Pirate.",
    });
    // Chatã®ãƒ¦ãƒ¼ã‚¶ã®å…¥åŠ›ã«ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’åŠ ãˆã€LLMã«è¿”ç­”ã‚’ç”Ÿæˆã•ã›ã‚‹
    const copilotLLMResponse = await fetch(
      "https://api.githubcopilot.com/chat/completions",
      // çœç•¥
    )
    Readable.from(copilotLLMResponse.body).pipe(res);
  })

Pythonã§ã‚‚ã§ãã¾ã—ãŸâœŒï¸ï¼ˆFastAPIâ¤ï¸ï¼‰
--------------------------------------------------

.. code-block:: python

    # https://github.com/ftnext/blackbeard-extension-python/blob/56ae295c54e2241645382a8a027a81316072b43b/app.py#L10-L40
    @app.post("/")
    async def stream(request: Request, x_github_token: str = Header(None)):
        payload = await request.json()
        messages = payload["messages"]
        messages.insert(
            0, {"role": "system", "content": "You are a helpful assistant that replies to user messages as if you were the Blackbeard Pirate."})

        def pass_generator():
            with httpx.stream(
                "POST", "https://api.githubcopilot.com/chat/completions", headers=headers, json=data,
            ) as response:
                # response.iter_lines() ã‚’ yield

        return StreamingResponse(pass_generator(), media_type="text/event-stream")

ç°¡å˜ã«å‹•ã‹ã›ã¾ã™ï¼
--------------------------------------------------

Demo https://github.com/ftnext/blackbeard-extension-python

ã¾ã¨ã‚ğŸŒ¯ Pythonã§ã‚‚GitHub Copilot Extensionsä½œã‚Œã‚‹ã‚‚ã‚“ï¼
======================================================================

* Copilot Chatã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œã‚Œã‚‹GitHub Copilot Extensions
* **æµ·è³Šé»’ã²ã’æ‹¡å¼µã‚’Pythonã§å®Ÿè£…** ã—ã¦ã¿ã¾ã—ãŸ
* OpenAIã®GPTsã®ã‚ˆã†ãªã‚‚ã®ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ä½œã£ã¦ã„ã‚‹æ„Ÿè¦šã§ã¨ã£ã¦ã‚‚ãƒ¯ã‚¯ãƒ¯ã‚¯

ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ
--------------------------------------------------

`blackbeard-extension-python <https://github.com/ftnext/blackbeard-extension-python>`__ ãŠè©¦ã—ã‚ã‚Œï¼

â˜ ï¸ã‚¼ãƒãƒãƒãƒâ˜ ï¸
