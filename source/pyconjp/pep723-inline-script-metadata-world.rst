=============================================================================================================
PEP 723（Inline script metadata）が拓く世界。Pythonスクリプトに必要な仮想環境をツールにおまかせできるんです！
=============================================================================================================

PEP 723（Inline script metadata）が拓く世界。Pythonスクリプトに必要な仮想環境をツールにおまかせできるんです！
==================================================================================================================================

:Event: PyCon JP 2024 ``#pyconjp_1``
:Presented: 2024/09/27 nikkie

突然ですが、**LT** します
======================================================================

* 粗い要点✨ を5分で伝えます
* その後25分間、*2周目* です

.. include:: summary-lt.rst.txt

inline script metadata アンケート
------------------------------------------------------------

* 知ってた or 使っている方？ 🙋‍♂️
* もしかして、今日初めて聞きました？ 🙋
* ふだんPythonのスクリプトを書く方？ 🙋‍♀️

この後は丁寧に話す **2周目** です
------------------------------------------------------------

* 並列トークも魅力的なので、ほかへ行っても大丈夫👍
* 🏃‍♂️のスライドは飛ばします。興味ある方は *3周目* でどうぞ

（申し遅れました）お前、誰よ
======================================================================

* nikkie ／ :fab:`github` `@ftnext <https://github.com/ftnext>`__ ／ `ブログ <https://nikkie-ftnext.hatenablog.com/>`__ 連続 **670** 日突破
* 機械学習エンジニア・自然言語処理（`We're hiring! <https://hrmos.co/pages/uzabase/jobs/1829077236709650481>`__）
* Python歴6年。PyConで登壇や小さなOSS（`sphinx-new-tab-link <https://github.com/ftnext/sphinx-new-tab-link>`__）

.. image:: ../_static/uzabase-white-logo.png

親の顔より見た、スクリプトと仮想環境
------------------------------------------------------------

* 仕事や `PyCon JPスタッフ <https://github.com/ftnext/python-as-pyconjp-staff>`__ ・ `みんなのPython勉強会 <https://startpython.connpass.com/>`__ （ポスターあります）スタッフで数々の **自動化** スクリプト
* **機械学習** も :file:`ipynb` ではなく、Pythonスクリプトで

そんな私には、**PEP 723が劇的**！！ 皆さんにも伝えたい・享受してほしい！

お品書き
======================================================================

1. **PEP 723が拓く世界**
2. 世界に漕ぎ出すツール
3. 拓かれた世界で（学びの共有）

.. include:: pep723-overivew.rst.txt

お品書き
======================================================================

1. PEP 723が拓く世界
2. **世界に漕ぎ出すツール**
3. 拓かれた世界で（学びの共有）

.. include:: pep723-support-tools.rst.txt

お品書き
======================================================================

1. PEP 723が拓く世界
2. 世界に漕ぎ出すツール
3. **拓かれた世界で（学びの共有）**

.. include:: pep723-tools-tips.rst.txt

まとめ🌯 PEP 723（Inline script metadata）が拓く世界
======================================================================

* まさに「Pythonスクリプトに必要な仮想環境をツールにおまかせできるんです！」
* **タイトル回収** に膝を打っていただけたら嬉しいです（嬉しいフィードバック：「PEP 723、天才ですね」）

Pythonスクリプトに必要な仮想環境をツールにおまかせできるんです！
----------------------------------------------------------------------

* 開発者は **inline script metadata** を書く
* サポートしたツール（pipx, uv, hatch, pdm など）でスクリプトを実行

.. code-block:: python

    # /// script
    # requires-python = ">=3.11"
    # dependencies = ["httpx", "rich"]
    # ///

IMO: スクリプトを書くPython本で採用プリーズ🙏 🏃‍♂️
------------------------------------------------------------

* 提言：ノンプログラマー向けのPythonで自動化本（例：『`退屈なことはPythonにやらせよう <https://www.oreilly.co.jp/books/9784873119274/>`__』）、かなり楽になるのでは？
* 例えばuvを採用。inline script metadata + :command:`uv run` で **自動化の実装だけに集中** できると思います

📣著者に届け（スクリプトだけ書きたい方の環境構築、ちょっとでも楽になれ）

今すぐインストール！！（Hatchもね）
------------------------------------------------------------

.. image:: ../_static/pyconjp/connpass_icon_pyconjp.png

ご清聴ありがとうございました
--------------------------------------------------

Enjoy Python scripting❤️

🥹🥹🥹 使ってくれますか？ 🥹🥹🥹

References
======================================================================

* `PEP 723`_
* `Inline script metadata (Python Packaging User Guide)`_

Appendix
======================================================================

スクリプトを実行するとき、仮想環境は何個できる？
------------------------------------------------------------

* ツールにもよるが「1個（スクリプトごとに作る）」または「1〜0個（依存の組ごとに作る）」
* 拙ブログ `inline script metadataをサポートしたツールが仮想環境を再利用する様子を、振る舞いやソースコードから調べる <https://nikkie-ftnext.hatenablog.com/entry/pep723-inline-script-metadata-tools-venv-cache-strategy-source-reading-202409>`__
* IMO: スクリプトごとに人力で仮想環境を作っていたのが自動化されたにすぎない

EOF
===
